generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Token {
  id               String      @id
  uuid             String
  chainId          Int
  name             String
  symbol           String
  isFeeOnTransfer  Boolean     @default(false)
  isCommon         Boolean     @default(false)
  derivedUSD       Float?
  generatedAt      DateTime    @default(now())
  updatedAt        DateTime    @updatedAt
  decimals         Int         @default(2)
  isLiquidityToken Boolean     @default(false)
  miniChartSVG     String      @default("") @db.VarChar(10000)
  poolsLP          Pool[]      @relation("tokenLP")
  pools0           Pool[]      @relation("token0")
  pools1           Pool[]      @relation("token1")
  incentives       Incentive[]

  @@unique([chainId, uuid])
  @@index([id])
  @@index([uuid])
  @@index([chainId])
  @@index([uuid, chainId])
}

model Pool {
  name          String
  apr           Float
  chainId       Int
  version       String
  token0Id      String
  token1Id      String
  swapFee       Float
  feeUSD        Float
  reserve0      String         @default("0")
  reserve1      String         @default("0")
  liquidityUSD  Float
  volumeUSD     Float
  liquidity     Float
  volume1d      Float
  fees1d        Float
  generatedAt   DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  tokenLPId     String         @default("0")
  id            String         @id @default(uuid())
  token0        Token          @relation("token0", fields: [token0Id], references: [id])
  token1        Token          @relation("token1", fields: [token1Id], references: [id])
  tokenLP       Token          @relation("tokenLP", fields: [tokenLPId], references: [id])
  daySnapshots  daySnapshot[]
  hourSnapshots hourSnapshot[]
  Incentive     Incentive[]

  @@index([id])
  @@index([chainId])
  @@index([chainId, version])
  @@index([token0Id])
  @@index([token1Id])
  @@index([generatedAt])
  @@index([tokenLPId])
}

model daySnapshot {
  id           Int      @id @default(autoincrement())
  poolId       String
  date         DateTime
  volumeUSD    Float
  liquidityUSD Float
  apr          Float
  priceHTR     Float    @default(0)
  reserve0     Float    @default(0)
  reserve1     Float    @default(0)
  pool         Pool     @relation(fields: [poolId], references: [id])

  @@index([poolId])
}

model hourSnapshot {
  id           Int      @id @default(autoincrement())
  poolId       String
  date         DateTime
  volumeUSD    Float
  liquidityUSD Float
  apr          Float
  priceHTR     Float    @default(0)
  reserve0     Float    @default(0)
  reserve1     Float    @default(0)
  pool         Pool     @relation(fields: [poolId], references: [id])

  @@index([poolId])
}

model Incentive {
  id              String @id
  chainId         Int
  apr             Float
  rewardPerDay    Float
  rewardTokenId   String
  poolId          String
  pid             Int
  rewarderAddress String
  rewardToken     Token  @relation(fields: [rewardTokenId], references: [id])
  pool            Pool   @relation(fields: [poolId], references: [id])

  @@index([id])
  @@index([poolId])
  @@index([rewardTokenId])
  @@index([chainId, rewardTokenId])
}

model c013_cf61_5c71_b944_0bf2d41fa1bd_20240118200748_vrepl {
  id           String   @id
  name         String
  apr          Float
  chainId      Int
  version      String
  token0Id     String
  token1Id     String
  swapFee      Float
  feeUSD       Float
  reserve0     String   @default("0")
  reserve1     String   @default("0")
  liquidityUSD Float
  volumeUSD    Float
  liquidity    Float
  volume1d     Float
  fees1d       Float
  generatedAt  DateTime @default(now())
  updatedAt    DateTime
  tokenLPId    String   @default("0")
  ncid         String   @default("00")

  @@index([chainId], map: "Pool_chainId_idx")
  @@index([chainId, version], map: "Pool_chainId_version_idx")
  @@index([generatedAt], map: "Pool_generatedAt_idx")
  @@index([id], map: "Pool_id_idx")
  @@index([token0Id], map: "Pool_token0Id_idx")
  @@index([token1Id], map: "Pool_token1Id_idx")
  @@index([tokenLPId], map: "Pool_tokenLPId_idx")
  @@map("_0517c013_cf61_5c71_b944_0bf2d41fa1bd_20240118200748_vrepl")
}
